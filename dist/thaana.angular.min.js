/**
 * ngThaana - v1.0.0 - 2014-01-31
 * https://github.com/raftalks/ngThaana
 *
 * Copyright (c) 2014 Rahmathullah (Raftalks)
 */
!function(){"use strict";angular.module("thaana.angular",[]).constant("keyboardLayout",{32:160,190:65106,59:1563,188:1548,113:1968,119:1927,101:1964,114:1923,116:1932,121:1940,117:1962,105:1960,111:1966,112:1941,97:1958,115:1936,100:1931,102:1930,103:1934,104:1920,106:1942,107:1926,108:1933,122:1938,120:215,99:1943,118:1928,98:1924,110:1922,109:1929,81:1956,87:1954,69:1965,82:1948,84:1939,89:1952,85:1963,73:1961,79:1967,80:247,65:1959,83:1921,68:1937,70:65010,71:1955,72:1945,74:1947,75:1946,76:1925,90:1953,88:1944,67:1949,86:1957,66:1950,78:1935,77:1951}).provider("ngThaana",function(){var a={activated:!0,keyboardLayout:{}};this.config=function(b,c){a[b]=c};var b=(-1!==navigator.platform.toUpperCase().indexOf("MAC"),-1!==navigator.platform.toUpperCase().indexOf("WIN"),-1!==navigator.platform.toUpperCase().indexOf("LINUX"),["$rootScope","keyboardLayout",function(b,c){var d=function(a){return String.fromCharCode(a)},e=function(b){if(void 0!==a.keyboardLayout[b]){var c=d(a.keyboardLayout[b]);return c}return d(b)};return a.keyboardLayout=c,{config:function(b,c){return void 0===c?a[b]:void(a[b]=c)},translate:function(a,b){if(b)return e(a);var c=d(a),f=c;return a>64?f=c.toLowerCase():console.log("below alphabet "+a),a=f.charCodeAt(0),console.log("converting latin "+c+" to "+f+" with code "+a),e(a)}}}]);return{$get:b}}).directive("ngThaana",["$log","ngThaana",function(a,b){var c=function(a){var b=a||window.event;if(a&&"number"==typeof b.which){var c=b.which;return c}return window.event?a.keyCode:a.which},d=function(a,d){a.thaanakeyboardActive=!1,a.$watch(function(){return b.config("activated")},function(b){b?(d.addClass("thaana"),d.attr("dir","rtl"),a.thaanakeyboardActive=!0):(d.removeClass("thaana"),d.removeAttr("dir"),a.thaanakeyboardActive=!1)}),a.$watch("thaanakeyboardActive",function(e){e?(console.log("activated"),a.keypressThaana=!1,a.shiftKeyDown=!1,d.bind("keyup",function(b){var d=c(b);16===d&&(a.shiftKeyDown=!1)}),d.bind("keydown",function(d){var e=c(d);if(16===e&&(a.shiftKeyDown=!0),d.ctrlKey===!0||d.altKey===!0||d.metaKey===!0||32>e&&8!==e)return console.log("special key"),!0;if(8==e)$(this).sendkeys("{backspace}");else{if(a.shiftKeyDown===!0&&65>e)return!0;d.preventDefault();var f=b.translate(e,a.shiftKeyDown);$(this).sendkeys(f)}})):(a.keypressThaana=!1,a.shiftKeyDown=!1,d.unbind())})};return{restrict:"A",link:d}}])}();